// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package components

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func HelpPage(domain string, pubkey string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<h1 class=\"text-2xl font-bold text-gray-900 mb-6\">Setup Guide</h1><div class=\"space-y-8\"><!-- DNS Records --><div class=\"rounded-lg bg-white p-6 shadow\"><h3 class=\"text-lg font-medium text-gray-900 mb-4\">1. DNS Records Configuration</h3><p class=\"text-sm text-gray-600 mb-4\">Configure the following DNS records. The tunnel domain is <code class=\"rounded bg-gray-100 px-2 py-0.5 text-indigo-700\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(domain)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 13, Col: 75}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "</code>.</p><div class=\"rounded-md bg-gray-900 p-4 font-mono text-sm text-green-400 overflow-x-auto\"><p class=\"mb-1\">; Authoritative NS record — delegates queries to your server</p><p class=\"mb-3\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var4 string
			templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(domain)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 17, Col: 29}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, ".    IN  NS   ns.")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var5 string
			templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(domain)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 17, Col: 56}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, ".</p><p class=\"mb-1\">; A record pointing to your server IP</p><p class=\"mb-3\">ns.")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var6 string
			templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(domain)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 19, Col: 32}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, ". IN  A    &lt;YOUR_SERVER_IP&gt;</p><p class=\"mb-1\">; If using IPv6, also add AAAA</p><p>ns.")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var7 string
			templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(domain)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 21, Col: 19}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, ". IN  AAAA &lt;YOUR_SERVER_IPv6&gt;</p></div><p class=\"mt-3 text-xs text-gray-500\">Replace <code class=\"rounded bg-gray-100 px-1\">&lt;YOUR_SERVER_IP&gt;</code> with the public IP of this server.</p></div><!-- Verify DNS --><div class=\"rounded-lg bg-white p-6 shadow\"><h3 class=\"text-lg font-medium text-gray-900 mb-4\">2. Verify DNS Setup</h3><p class=\"text-sm text-gray-600 mb-4\">Run these commands to verify your DNS records are propagated:</p><div class=\"rounded-md bg-gray-900 p-4 font-mono text-sm text-green-400 overflow-x-auto\"><p class=\"mb-2\">$ dig NS ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var8 string
			templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(domain)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 33, Col: 38}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "</p><p class=\"mb-1\">; Should show: ns.")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var9 string
			templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(domain)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 34, Col: 47}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, ".</p><p class=\"mt-3 mb-2\">$ dig A ns.")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var10 string
			templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(domain)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 35, Col: 45}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "</p><p>; Should show your server IP</p></div></div><!-- Server Key --><div class=\"rounded-lg bg-white p-6 shadow\"><h3 class=\"text-lg font-medium text-gray-900 mb-4\">3. Server Public Key</h3><p class=\"text-sm text-gray-600 mb-4\">Clients (MahsaNG) need this public key. It is embedded in generated configs automatically.</p><div class=\"flex items-center gap-3\"><input type=\"text\" id=\"pubkey-input\" value=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var11 string
			templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(pubkey)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/panel/components/help.templ`, Line: 47, Col: 56}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "\" readonly class=\"flex-1 rounded-md bg-gray-100 border-gray-300 py-2 px-3 font-mono text-sm ring-1 ring-inset ring-gray-300 text-gray-600\"> <button onclick=\"copyToClipboard(document.getElementById('pubkey-input').value)\" class=\"rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-500\">Copy</button></div></div><!-- MahsaNG Client Setup --><div class=\"rounded-lg bg-white p-6 shadow\"><h3 class=\"text-lg font-medium text-gray-900 mb-4\">4. MahsaNG Client Setup</h3><ol class=\"list-decimal list-inside space-y-3 text-sm text-gray-700\"><li>Create a user from the <a href=\"users\" class=\"text-indigo-600 hover:text-indigo-500 underline\">Users page</a></li><li>Click the \"Config\" button on the user row to get the MahsaNG JSON</li><li>In MahsaNG/v2rayNG, import the config via clipboard or file</li><li>Connect — traffic flows: <code class=\"rounded bg-gray-100 px-1\">App → MahsaNG → DNS queries → dnstt server → Shadowsocks → Internet</code></li></ol></div><!-- Port Forwarding --><div class=\"rounded-lg bg-white p-6 shadow\"><h3 class=\"text-lg font-medium text-gray-900 mb-4\">5. Port Forwarding (iptables)</h3><p class=\"text-sm text-gray-600 mb-4\">The DNS tunnel needs to receive packets on external port 53. Running directly on :53 requires root. It's better to listen on an unprivileged port (e.g. :5300) and redirect port 53 to it. Replace <code class=\"rounded bg-gray-100 px-1\">eth0</code> with your actual network interface (check with <code class=\"rounded bg-gray-100 px-1\">ip a</code>).</p><div class=\"rounded-md bg-gray-900 p-4 font-mono text-sm text-green-400 overflow-x-auto\"><p class=\"mb-1 text-gray-400\"># Allow incoming UDP on port 5300</p><p class=\"mb-1\">sudo iptables -I INPUT -p udp --dport 5300 -j ACCEPT</p><p class=\"mb-3\">sudo ip6tables -I INPUT -p udp --dport 5300 -j ACCEPT</p><p class=\"mb-1 text-gray-400\"># Redirect external port 53 → 5300</p><p class=\"mb-1\">sudo iptables -t nat -I PREROUTING -i eth0 -p udp --dport 53 -j REDIRECT --to-ports 5300</p><p class=\"mb-3\">sudo ip6tables -t nat -I PREROUTING -i eth0 -p udp --dport 53 -j REDIRECT --to-ports 5300</p><p class=\"mb-1 text-gray-400\"># Make rules persistent across reboots (Debian/Ubuntu)</p><p class=\"mb-1\">sudo apt install iptables-persistent</p><p>sudo netfilter-persistent save</p></div></div><!-- Architecture --><div class=\"rounded-lg bg-white p-6 shadow\"><h3 class=\"text-lg font-medium text-gray-900 mb-4\">6. Architecture</h3><pre class=\"rounded-md bg-gray-50 p-4 text-sm font-mono text-gray-700 overflow-x-auto leading-relaxed\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = diagramBlock().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "</pre></div><!-- Troubleshooting --><div class=\"rounded-lg bg-white p-6 shadow\"><h3 class=\"text-lg font-medium text-gray-900 mb-4\">7. Troubleshooting</h3><dl class=\"space-y-4 text-sm\"><div><dt class=\"font-medium text-gray-900\">DNS queries not reaching server?</dt><dd class=\"mt-1 text-gray-600\">Check that port 53 UDP is open on your firewall, and that your NS records are properly configured. Use <code class=\"rounded bg-gray-100 px-1\">tcpdump -n -i any port 5300</code> to verify.</dd></div><div><dt class=\"font-medium text-gray-900\">Client can't connect?</dt><dd class=\"mt-1 text-gray-600\">Ensure the public key matches and the domain is correct in the config. The user must find a DNS resolver that works in their network and can reach your authoritative server (try their ISP resolver, or public resolvers like 8.8.8.8, 1.1.1.1, 9.9.9.9 — different resolvers may be blocked in different regions).</dd></div><div><dt class=\"font-medium text-gray-900\">Slow speeds?</dt><dd class=\"mt-1 text-gray-600\">DNS tunneling is inherently slower than direct connections. Try increasing MTU in settings (up to 4096). The user should try different DNS resolvers — one with low latency to your server and not blocked in their region will give the best speeds.</dd></div><div><dt class=\"font-medium text-gray-900\">Panel TLS not working?</dt><dd class=\"mt-1 text-gray-600\">ACME requires ports 80 and 443 to be open. Set the panel domain and ACME email in Settings. If running behind a reverse proxy, use plain HTTP mode instead.</dd></div></dl></div></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = Layout("Help").Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func diagramBlock() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var12 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var12 == nil {
			templ_7745c5c3_Var12 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templ.Raw(`Client (MahsaNG)          Server (dnsttui)
┌──────────────┐         ┌────────────────────────────────────┐
│  SS Client   │         │  DNS Listener (:5300 UDP)          │
│  (built-in)  │         │    ↓                               │
│      ↓       │  DNS    │  dnstt decoder (KCP/Noise/smux)    │
│  dnstt       │ ──────→ │    ↓                               │
│  transport   │  query  │  Shadowsocks 2022 (127.0.0.1:8388) │
│              │         │    ↓                               │
└──────────────┘         │  Internet                          │
                         │                                    │
                         │  Panel (HTTPS :443)                │
                         └────────────────────────────────────┘`).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
